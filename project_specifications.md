# مواصفات المشروع: بوت تيليجرام للتسويق الاجتماعي (SMM Bot)

## نظرة عامة
بوت تيليجرام متكامل للتسويق الاجتماعي (SMM) يقدم واجهة سهلة للمستخدمين للتفاعل مع خدمات التسويق عبر API خارجية. يدعم البوت اللغة العربية في جميع واجهاته ويقدم نظام إدارة متقدم للمشرفين.

## المميزات الرئيسية

### للمستخدم العادي
- تسجيل وإدارة الحساب الشخصي
- استعراض فئات وخدمات التسويق المتاحة
- طلب الخدمات وتتبع حالة الطلبات
- إجراء عمليات الإيداع وتتبعها
- عرض تاريخ الطلبات والإيداعات

### للمشرفين
- لوحة تحكم مشرف شاملة
- مزامنة الخدمات والفئات من API الخارجية
- إدارة طلبات المستخدمين
- إدارة طلبات الإيداع (الموافقة/الرفض)
- إضافة أو خصم رصيد للمستخدمين
- إرسال إشعارات عامة للمستخدمين
- إدارة رتب المستخدمين ومراقبة النظام

## التقنيات المستخدمة
- **اللغة**: Python 3.11
- **إطار عمل البوت**: Aiogram 3.7.0
- **قاعدة البيانات**: SQLite عبر aiosqlite
- **التزامن**: asyncio
- **التكامل مع API**: aiohttp
- **المتغيرات البيئية**: python-dotenv

## بنية المشروع
```
smm-bot/
├── bot.py              # ملف إعداد البوت الرئيسي
├── config.py           # ملف الإعدادات العامة
├── main.py             # نقطة بدء البوت الرئيسية
├── database/           # وحدات قاعدة البيانات
│   ├── __init__.py
│   ├── core.py         # وظائف قاعدة البيانات الأساسية
│   ├── deposit.py      # وظائف إدارة طلبات الإيداع
│   └── ranks.py        # وظائف إدارة رتب المستخدمين
├── handlers/           # معالجات البوت
│   ├── __init__.py
│   ├── admin.py        # معالجات المشرف
│   └── user.py         # معالجات المستخدم
├── keyboards/          # لوحات المفاتيح
│   ├── __init__.py
│   ├── inline.py       # أزرار الإنلاين
│   └── reply.py        # أزرار الرد
├── services/           # خدمات خارجية
│   ├── api.py          # واجهة التعامل مع API
│   └── sync_services.py # مزامنة الخدمات والفئات
├── states/             # حالات الحوار
│   └── order.py        # حالات الطلب
└── utils/              # أدوات مساعدة
    ├── __init__.py
    ├── common.py       # وظائف مشتركة
    └── keyboard_manager.py # إدارة لوحات المفاتيح
```

## وظائف قاعدة البيانات
- إدارة المستخدمين (إنشاء، تحديث، استرجاع)
- إدارة الطلبات (إنشاء، تحديث الحالة، استرجاع)
- إدارة الإيداعات (إنشاء، الموافقة، الرفض)
- إدارة الخدمات والفئات (مزامنة، تحديث)
- إدارة رتب المستخدمين (تحديث تلقائي حسب الرصيد)

## تكامل API الخارجي
- استرجاع رصيد الحساب
- استرجاع قائمة الخدمات والفئات المتاحة
- إنشاء طلبات جديدة
- التحقق من حالة الطلبات
- تحديث حالة وكمية الطلبات

## حالات المستخدم
يستخدم البوت نظام حالة (FSM) لإدارة سير العمل مع:
- حالات الطلب
- حالات الإيداع
- حالات إدارة المستخدمين
- حالات إدارة الرتب

## لوحات المفاتيح
- لوحات مفاتيح رد ديناميكية للمستخدمين والمشرفين
- أزرار إنلاين للتفاعل مع خيارات متعددة
- دعم التخصيص حسب حالة المستخدم

## وظائف المشرف المتقدمة
- تحديث الخدمات من API بنقرة واحدة
- عرض إحصائيات متقدمة عن الطلبات والإيداعات
- إدارة الطلبات المعلقة
- التعامل مع الإيداعات
- إدارة الرتب والمستخدمين

## الأمان والاعتماد
- نظام تسجيل متقدم لتتبع الأخطاء والإجراءات
- معالجة الأخطاء بشكل آمن ومتسق
- استخدام المتغيرات البيئية للمعلومات الحساسة
- نظام قفل لضمان تشغيل نسخة واحدة من البوت

## معلومات التخصيص
- تخصيص رسائل البوت من ملفات الإعدادات
- تخصيص طرق الدفع ومعلومات الاتصال
- إمكانية إضافة فئات وخدمات مخصصة